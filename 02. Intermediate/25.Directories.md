# Directories

- Work with directories programatically. Create, read, delete and navigate.
- `os` package lets us interact with directories.


## Create directories

## Mkdir(name, permission) Error

- When creating directory, we need to specify permission to OS about Who can read, write, or enter this directory?
- If directory with name already exists, it throws an error.

```go
err := os.Mkdir("study-folder", 0755)
```

## MkdirAll(path, permission) Error

- To create multiple nested directories. With Mkdir I will have to call it multiple times.

```go
err = os.MkdirAll("study-folder/folder1/sub-folder1", 0755)
```

## Creating files

```go
err = os.WriteFile("study-folder/readme", []byte("Hello World!"), 0755)
```

| Feature              | `os.WriteFile` | `os.Create + Write`   |
| -------------------- | -------------- | -------------------   |
| Simplicity           | ✅ Very simple  | ❌ More code          |
| Manual control       | ❌ No           | ✅ Yes                |
| Multiple writes      | ❌ Not ideal    | ✅ Yes                |
| Streaming large data | ❌ No           | ✅ Yes                |
| Use with bufio       | ❌ No           | ✅ Yes                |
| Keep file open       | ❌ No           | ✅ Yes                |


## Reading directories


## ReadDir(path to directory) []os.DirEntry, err

- It will return the contents of a directory in a slice.
- We can loop on the entries and apply some utility methods.

```go
	err := os.MkdirAll("study-folder/folder1/sub-folder1", 0755)
	os.Mkdir("study-folder/folder1/sub-folder-2", 075)
	os.Mkdir("study-folder/folder1/sub-folder-3", 075)
	os.WriteFile("study-folder/folder1/file1.txt", []byte(""), 075)
	os.WriteFile("study-folder/folder1/sub-folder1/file1.txt", []byte(""), 075)
	os.WriteFile("study-folder/folder1/sub-folder2/file1.txt", []byte(""), 075)
	os.WriteFile("study-folder/folder1/sub-folder3/file1.txt", []byte(""), 075)
```

```go
	result, err := os.ReadDir("study-folder/folder1")
	if err != nil {
		fmt.Println("Error reading directory", err)
		return
	}
	for _, value := range result {
		fmt.Println(value.Name(), value.IsDir())
	}
}
```

## Chdir()

- It changes the program’s current working directory.
- We can know the current working directory of the program using `os.Getwd`

```go
func main() {
	result, err := os.ReadDir("study-folder/folder1")

	fmt.Println(os.Getwd()) // /Users/saksham/Desktop/Go

	err = os.Chdir("study-folder/folder1")

	fmt.Println(os.Getwd()) // /Users/saksham/Desktop/Go/study-folder/folder1

}
```

## Walkdir

- Recursively navigate through all teh folders and their content starting from the root node provided.

```go
func main() {
	path := "root"
	err := filepath.WalkDir(path, func(path string, d os.DirEntry, err error) error {
		fmt.Println(path, d)
		return nil
	})

	if err != nil {
		fmt.Println("Something went wrong", err)
		return
	}

}
```
