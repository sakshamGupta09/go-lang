# URL Parsing

- To extract components from a URL and to construct a URL from components.


## Anataomy of a URL

```go
https://www.example.com:8080/path/to/page?search=golang&sort=asc#section2
```

| Component          | Value                                      | Description |
|--------------------|--------------------------------------------|-------------|
| Scheme (Protocol)  | https                                      | Communication protocol |
| Host               | www.example.com                            | Server host name |
| Port               | 8080                                       | Server port |
| Path               | /path/to/page                              | Resource path on server |
| Query Parameters   | search=golang&sort=asc                     | Keyâ€“value data sent to server |
| Fragment (Anchor)  | section2                                   | Page section reference |


## Extracting components from URL

- `url.Parse` takes a raw URL and returns either parsedURL of type `url.URL` or an error.

```go
func main() {
	rawUrl := "https://www.example.com:8080/path/to/page?search=golang&sort=asc#section2"

	parsedUrl, err := url.Parse(rawUrl)

	if err != nil {
		fmt.Println("ERROR PARSING THE URL", err)
		return
	}

	fmt.Println("SCHEME:", parsedUrl.Scheme) // https
	fmt.Println("HOST:", parsedUrl.Host)     // www.example.com:8080
	fmt.Println("PORT:", parsedUrl.Port())   // 8080 
	fmt.Println("PATH:", parsedUrl.Path)     // /path/to/page
	fmt.Println("RAW QUERY:", parsedUrl.RawQuery)  // search=golang&sort=asc
	fmt.Println("Fragments:", parsedUrl.Fragment)  // section2
}
```

## Query Params

- parsedURL has a method called `query` which returns `Values` type which is a map of key string and value is of type string slice.


```go
func main() {
	rawUrl := "https://www.example.com:8080/path/to/page?search=golang&sort=asc#section2"

	parsedUrl, err := url.Parse(rawUrl)

	if err != nil {
		fmt.Println("ERROR PARSING THE URL", err)
		return
	}

	query := parsedUrl.Query()

	fmt.Println(query.Get("search")) // golang
	fmt.Println(query.Get("sort"))   // asc

}

```

## Building a URL

```go
func main() {

	rawURL := url.URL{
		Scheme:   "https",
		Host:     "example.com",
		Path:     "path",
		RawQuery: "name=saksham&age=28",
	}

	fmt.Println(rawURL.String())
}
```
